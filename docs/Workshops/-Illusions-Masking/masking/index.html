<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Images Masking # Kernel masking, also known as convolution masking, is a technique used in image processing to apply a specific filter or kernel to an image. This technique involves sliding a small matrix, known as a kernel or filter, over the entire image and performing a mathematical operation at each pixel location. The resulting output image is a new image that has been transformed based on the filter&rsquo;s characteristics."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Images Masking # Kernel masking, also known as convolution masking, is a technique used in image processing to apply a specific filter or kernel to an image. This technique involves sliding a small matrix, known as a kernel or filter, over the entire image and performing a mathematical operation at each pixel location. The resulting output image is a new image that has been transformed based on the filter&rsquo;s characteristics."><meta property="og:type" content="article"><meta property="og:url" content="https://visualcomputing.github.io/showcase/docs/Workshops/-Illusions-Masking/masking/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-03-29T20:53:02-05:00"><title>Masking | Showcase Template</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-bffb37aabc511da64618cc3c63b579fa class=toggle>
<label for=section-bffb37aabc511da64618cc3c63b579fa class="flex justify-between"><a role=button>About Us</a></label><ul><li><a href=/showcase/docs/About-Us/Alejandro_Melo/>Alejandro Melo</a></li><li><a href=/showcase/docs/About-Us/David_Cifuentes/>David Cifuentes</a></li></ul></li><li><input type=checkbox id=section-a188884b9383bb4bffff7b6b9533ab3a class=toggle>
<label for=section-a188884b9383bb4bffff7b6b9533ab3a class="flex justify-between"><a role=button>Video Deliveries</a></label><ul><li><a href=/showcase/docs/video-deliveries/first_delivery/>First Delivery</a></li></ul></li><li><span>Workshops</span><ul><li><input type=checkbox id=section-ed0725c6e97e51794270952248699bca class=toggle checked>
<label for=section-ed0725c6e97e51794270952248699bca class="flex justify-between"><a role=button>Illusions & Masking</a></label><ul><li><a href=/showcase/docs/Workshops/-Illusions-Masking/illusions/>Illusions</a></li><li><a href=/showcase/docs/Workshops/-Illusions-Masking/masking/ class=active>Masking</a></li></ul></li><li><input type=checkbox id=section-dc7e1e5fd4746fe856186ff48c2abd08 class=toggle>
<label for=section-dc7e1e5fd4746fe856186ff48c2abd08 class="flex justify-between"><a role=button>Coloring</a></label><ul><li><a href=/showcase/docs/Workshops/coloring/coloring/>Coloring</a></li></ul></li><li><input type=checkbox id=section-525cd1d84778a1ab9af01594b17afcfd class=toggle>
<label for=section-525cd1d84778a1ab9af01594b17afcfd class="flex justify-between"><a role=button>Procedural Texturing</a></label><ul><li><a href=/showcase/docs/Workshops/Procedural-Texturing/3DShapes/>3 Dshapes</a></li></ul></li><li><input type=checkbox id=section-2889902daffc9a8f722a6fb0706d26db class=toggle>
<label for=section-2889902daffc9a8f722a6fb0706d26db class="flex justify-between"><a role=button>Terrain Generation</a></label><ul><li><a href=/showcase/docs/Workshops/terrain_generation/mach_bands/>Mach Bands</a></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Masking</strong>
<label for=toc-control></label></div></header><article class=markdown><h2 id=images-masking>Images Masking
<a class=anchor href=#images-masking>#</a></h2><p>Kernel masking, also known as convolution masking, is a technique used in image processing to apply a specific filter or kernel to an image. This technique involves sliding a small matrix, known as a kernel or filter, over the entire image and performing a mathematical operation at each pixel location. The resulting output image is a new image that has been transformed based on the filter&rsquo;s characteristics.</p><p>The kernel or filter used in convolution masking is a small matrix typically containing odd numbers of rows and columns, such as 3x3, 5x5, or 7x7. The elements of the kernel represent the weights assigned to each pixel in the image. The weights determine how much influence the pixel has on the resulting image after the kernel is applied.</p><p>The mathematical operation performed at each pixel location involves multiplying the values of the kernel by the corresponding pixel values in the image. The resulting products are summed, and the final result is assigned to the corresponding pixel location in the output image. This process is repeated for every pixel in the image, resulting in a new transformed image.</p><p>Kernel masking is a powerful technique used in various image processing tasks, such as image smoothing, sharpening, edge detection, and feature extraction. The choice of kernel used depends on the specific image processing task at hand. For example, a Gaussian filter kernel is commonly used for image smoothing, while a Sobel filter kernel is used for edge detection.</p><blockquote class="book-hint info"><strong>Masking Example -</strong> Operation of a sharpen 3x3 masking being applied to an image:
<img src=/showcase/assets/video/convolution_example.gif alt="Convolution Example" style="height:300px;width:600px;margin:30px auto;display:block"></blockquote><h2 id=histograms>Histograms
<a class=anchor href=#histograms>#</a></h2><p>A histogram is a graph that shows the frequency of occurrence of each intensity value in the image. By analyzing the histogram of an image, we can gain insights into the image&rsquo;s characteristics, such as its brightness, contrast, and color balance. Histograms are widely used in various fields, such as photography, computer vision, and machine learning.</p><p>In image processing, a histogram is a function that counts the number of pixels in an image that have a particular intensity value. The horizontal axis of the histogram represents the intensity values, and the vertical axis represents the number of pixels with that intensity value.</p><p>Histograms can be calculated for each channel of an RGB image, representing the red, green, and blue color channels. This allows us to analyze the distribution of pixel values in each channel independently. We can also calculate a combined histogram that represents the distribution of pixel values across all three channels.</p><p>Histogram equalization is a technique used to adjust the distribution of pixel values in an image to improve its visual quality. This technique involves stretching the histogram to make the intensity values more evenly distributed. This can improve the image&rsquo;s contrast and brightness and make it more visually appealing.</p><blockquote class="book-hint info"><strong>Histogram Example -</strong> Example of two histograms over a masked image:
<img src=/showcase/assets/image/histogram.png alt="Histogram Example" style="height:300px;width:400px;margin:30px auto;display:block"></blockquote><h2 id=brightness-control>Brightness control
<a class=anchor href=#brightness-control>#</a></h2><p>Brightness control is another important technique in image processing that can be used to adjust the overall brightness of an image. By increasing or decreasing the brightness, we can make an image appear lighter or darker, respectively. This can be useful for correcting underexposed or overexposed images, or for enhancing the visibility of certain features.</p><p>Brightness control is typically performed by adding a constant value to each pixel in the image. This constant value is known as the brightness adjustment factor. The brightness adjustment factor can be positive or negative, depending on whether we want to increase or decrease the brightness of the image. The larger the value of the brightness adjustment factor, the more pronounced the effect of the brightness control.</p><p>Another way to implement such technique is by using other colors modes, such as HSB or HSL. In these color modes, the brightness of a color is represented by the brightness component, which is a value between 0 and 100. By increasing or decreasing the brightness component, we can increase or decrease the brightness of the color, respectively. This can be useful for adjusting the brightness of an image without having to change the color of the pixels, but by using this technique, we lose the ability to control the color of the pixels independently, wich can lead to undesirable results.</p><details><summary>Special Keys</summary><div class=markdown-inner><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td>F</td><td>Change mask</td></tr><tr><td>G</td><td>Show histogram</td></tr><tr><td>H</td><td>Change image</td></tr><tr><td>J</td><td>Change Histogram</td></tr><tr><td>K</td><td>Change mask mode</td></tr><tr><td>V</td><td>Decrease brightness</td></tr><tr><td>B</td><td>Increase brightness</td></tr><tr><td>R</td><td>Reset image</td></tr></tbody></table></div></details><iframe marginheight=0 marginwidth=0 frameborder=0 scrolling=no id=masking style=width:600px;height:880px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/showcase/sketches/masking.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=code-explanation>Code Explanation
<a class=anchor href=#code-explanation>#</a></h2><h3 id=masking>Masking
<a class=anchor href=#masking>#</a></h3><p>The program has a set of kernels and images that will be preloaded, those sets are gona be used to reset the image and to change the mask, so the image being modified is in another variable so it can be modified as much as wanted without affecting the original image, the kernels are 3x3 matrices that are used to modify the image, the kernel is applied to the image by multiplying each pixel of the image by the corresponding pixel of the kernel, the result of the multiplication is added to the rest of the results of the multiplication of the other pixels, and the result is assigned to the pixel that is being modified, this process is repeated for every pixel in the image, resulting in a new transformed image.</p><details><summary>Image convolution</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>convolveImage</span>(<span style=color:#a6e22e>image</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>posX</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>posX</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>image</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>posX</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>posY</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>posY</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>image</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>posY</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>operatedPixel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getConvolution</span>(<span style=color:#a6e22e>image</span>, <span style=color:#a6e22e>posX</span>, <span style=color:#a6e22e>posY</span>);
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>position</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>posX</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>posY</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>image</span>.<span style=color:#a6e22e>width</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>image</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>position</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>operatedPixel</span>.<span style=color:#a6e22e>r</span>;
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>image</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>position</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>operatedPixel</span>.<span style=color:#a6e22e>g</span>;
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>image</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>position</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>operatedPixel</span>.<span style=color:#a6e22e>b</span>;
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>image</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>position</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>300</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>80</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>image</span>.<span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><h3 id=histogram>Histogram
<a class=anchor href=#histogram>#</a></h3><p>The histogram is a graph that shows the frequency of occurrence of each intensity value in the image, the histogram is calculated by counting the number of pixels in an image that have a particular intensity value, the horizontal axis of the histogram represents the intensity values, and the vertical axis represents the number of pixels with that intensity value, the histogram is calculated by counting the number of pixels in an image that have a particular intensity value, the horizontal axis of the histogram represents the intensity values, and the vertical axis represents the number of pixels with that intensity value.</p><details><summary>Histogram calculation and equalization</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>calculateHistograms</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>histograms</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Init the histograms array
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>4</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>histograms</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>256</span>).<span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Calculate the histogram for the three color channels and the average
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>masking_canvas</span>.<span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>masking_canvas</span>.<span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Get the color channels
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>channels</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getPixel</span>(<span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Calculate the average
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>avg</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>channels</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>channels</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>channels</span>[<span style=color:#ae81ff>2</span>]) <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>histograms</span>[<span style=color:#ae81ff>0</span>][<span style=color:#a6e22e>avg</span>]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>histograms</span>[<span style=color:#ae81ff>1</span>][<span style=color:#a6e22e>channels</span>[<span style=color:#ae81ff>0</span>]]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>histograms</span>[<span style=color:#ae81ff>2</span>][<span style=color:#a6e22e>channels</span>[<span style=color:#ae81ff>1</span>]]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>histograms</span>[<span style=color:#ae81ff>3</span>][<span style=color:#a6e22e>channels</span>[<span style=color:#ae81ff>2</span>]]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Scale down the histograms to fit the histogram canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>scaleDownHistograms</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>scaleDownHistograms</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Iterate over the histograms and scale them down
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>histograms</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>scale_factor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>histogram_canvas</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>max</span>(...<span style=color:#a6e22e>histograms</span>[<span style=color:#a6e22e>i</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>histograms</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>histograms</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>*=</span> <span style=color:#a6e22e>scale_factor</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><h3 id=brightness-control-1>Brightness control
<a class=anchor href=#brightness-control-1>#</a></h3><p>Brightness control is another important technique in image processing that can be used to adjust the overall brightness of an image. By increasing or decreasing the brightness, we can make an image appear lighter or darker, respectively. This can be useful for correcting underexposed or overexposed images, or for enhancing the visibility of certain features.</p><p>In the implementation of this technique was done by adding a constant value to each pixel in the image. This constant value is known as the brightness adjustment factor. The brightness adjustment factor can be positive or negative, depending on whether we want to increase or decrease the brightness of the image. The larger the value of the brightness adjustment factor, the more pronounced the effect of the brightness control.</p><details><summary>Brightness control</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>operateBrightness</span>(<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>current_image</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> [<span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>g</span>, <span style=color:#a6e22e>b</span>] <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>current_image</span>.<span style=color:#a6e22e>pixels</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>4</span>) {
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>g</span>, <span style=color:#a6e22e>b</span>] <span style=color:#f92672>=</span> [<span style=color:#a6e22e>current_image</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span>], <span style=color:#a6e22e>current_image</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>], <span style=color:#a6e22e>current_image</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>]];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>current_image</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>constrain</span>(<span style=color:#a6e22e>r</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>value</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>current_image</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>constrain</span>(<span style=color:#a6e22e>g</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>value</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>current_image</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>constrain</span>(<span style=color:#a6e22e>b</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>value</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>current_image</span>.<span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>controlBrightness</span>(<span style=color:#a6e22e>increment</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>increment</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>operateBrightness</span>(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>operateBrightness</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>histogram_changed</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><h3 id=interactivity>Interactivity
<a class=anchor href=#interactivity>#</a></h3><p>This was deffinetly the most challenging part of the project, the interactivity was implemented by using a series of flags that allows the interactivity of the 3 main features of the project, the masking, the histogram and the brightness control, the flags are set to true when the user clicks on the corresponding button, and the flags are set to false when the user clicks on the same button again, this way the user can toggle the feature on and off.</p><p>Other flags are only as a state machine to control when a certain component need to be updated (this was thone this way for optimization reasons), for example, the histogram is only calculated when the current selected image in changed in any way, and the changes to the image are calculated only once in the workflow.</p><details><summary>Interactivity</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>show_histogram</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>histogram_changed</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mask_changed</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>local_mode</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>52</span>, <span style=color:#ae81ff>58</span>, <span style=color:#ae81ff>64</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mask_changed</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Check to apply the mask locally or globally
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>local_mode</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>applyLocalMask</span>() <span style=color:#f92672>:</span> <span style=color:#a6e22e>applyGlobalMask</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Reset the flags
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>mask_changed</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>histogram_changed</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Histogram has a change, calculate the new histograms
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>histogram_changed</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>show_histogram</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>calculateHistograms</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>histogram_changed</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// load the selected image to the masking canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>masking_canvas</span>.<span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>current_image</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>CANVAS_SIZE</span>, <span style=color:#a6e22e>CANVAS_SIZE</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>displayName</span>(<span style=color:#a6e22e>mask_title</span>, <span style=color:#a6e22e>masking_canvas</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>masking_canvas</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Display the histogram if the flag is true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>show_histogram</span>) <span style=color:#a6e22e>drawHistogram</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>keyPressed</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>switch</span> (<span style=color:#a6e22e>key</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;f&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>switchMask</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;g&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>show_histogram</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>show_histogram</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>histogram_changed</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;h&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>switchImage</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>histogram_changed</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;j&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>switchHistogram</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;k&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>local_mode</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>local_mode</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>clearMask</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;v&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>controlBrightness</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;b&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>controlBrightness</span>(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;r&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>clearMask</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><h2 id=final-thoughts>Final Thoughts
<a class=anchor href=#final-thoughts>#</a></h2><p>This masking thechnique is widely used in image processing, and it can be used to perform a variety of image processing tasks, such as image smoothing, sharpening, edge detection, and feature extraction. The choice of kernel used depends on the specific image processing task at hand. For example, a Gaussian filter kernel is commonly used for image smoothing, while a Sobel filter kernel is used for edge detection, more especifcally in the visual effects industry for copmposting and applying color corrections, the features extraction technique among complex IA models are capable of optimize the work that later on must be done by a human, and the histogram equalization is a technique used to adjust the distribution of pixel values in an image to improve its visual quality, this technique is used in profesional photography to improve the image&rsquo;s contrast and brightness and make it more visually appealing.</p><h2 id=references>References
<a class=anchor href=#references>#</a></h2><ul><li><a href=https://medium.com/swlh/image-processing-with-python-convolutional-filters-and-kernels-b9884d91a8fd>Medium - Image processing with python</a></li><li><a href=https://en.wikipedia.org/wiki/Histogram>Wikipedia - Histogram</a></li><li><a href=https://en.wikipedia.org/wiki/Histogram_equalization>Wikipedia - Histogram equalization</a></li><li><a href=https://en.wikipedia.org/wiki/Brightness>Wikipedia - Brightness</a></li><li><a href=https://en.wikipedia.org/wiki/Color_model>Wikipedia - Color model</a></li><li><a href=https://en.wikipedia.org/wiki/HSL_and_HSV>Wikipedia - HSL and HSV</a></li><li>[IA - ChatGPT: Text generation only] (<a href=https://chat.openai.com/chat>https://chat.openai.com/chat</a>)</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://AlejoM1908.github.io/showcase/commit/06bc0f883ceb96cc3886829c91cdafb96ea053c9 title='Last modified by Daniel Alejandro Melo | March 30, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>March 30, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div></main></body></html>