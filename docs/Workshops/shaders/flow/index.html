<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Flow field art # Flow art is a captivating form of artistic expression that explores the beauty of fluidity and movement, it embraces the dynamic nature of flowing substances, such as paint, ink, or other viscous materials, to create mesmerizing patterns and compositions; The process involves pouring or manipulating the fluid medium onto a surface, allowing it to move and spread organically. The interplay of gravity, surface tension, and the artist&rsquo;s guidance gives rise to a symphony of shapes, colors, and textures pleasing to the observer."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Flow field art # Flow art is a captivating form of artistic expression that explores the beauty of fluidity and movement, it embraces the dynamic nature of flowing substances, such as paint, ink, or other viscous materials, to create mesmerizing patterns and compositions; The process involves pouring or manipulating the fluid medium onto a surface, allowing it to move and spread organically. The interplay of gravity, surface tension, and the artist&rsquo;s guidance gives rise to a symphony of shapes, colors, and textures pleasing to the observer."><meta property="og:type" content="article"><meta property="og:url" content="https://visualcomputing.github.io/showcase/docs/Workshops/shaders/flow/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-06-19T23:53:50-05:00"><title>Flow | Showcase Template</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-bffb37aabc511da64618cc3c63b579fa class=toggle>
<label for=section-bffb37aabc511da64618cc3c63b579fa class="flex justify-between"><a role=button>About Us</a></label><ul><li><a href=/showcase/docs/About-Us/Alejandro_Melo/>Alejandro Melo</a></li><li><a href=/showcase/docs/About-Us/David_Cifuentes/>David Cifuentes</a></li></ul></li><li><input type=checkbox id=section-ab817738b5cb607b62ce212ca2d98366 class=toggle>
<label for=section-ab817738b5cb607b62ce212ca2d98366 class="flex justify-between"><a role=button>Second Delivery</a></label><ul><li><a href=/showcase/docs/Second-Delivery/Post_effects/>Post Effects</a></li><li><a href=/showcase/docs/Second-Delivery/Procedural_texturing/>Procedural Texturing</a></li></ul></li><li><input type=checkbox id=section-a188884b9383bb4bffff7b6b9533ab3a class=toggle>
<label for=section-a188884b9383bb4bffff7b6b9533ab3a class="flex justify-between"><a role=button>Video Deliveries</a></label><ul><li><a href=/showcase/docs/video-deliveries/first_delivery/>First Delivery</a></li></ul></li><li><span>Workshops</span><ul><li><input type=checkbox id=section-ed0725c6e97e51794270952248699bca class=toggle>
<label for=section-ed0725c6e97e51794270952248699bca class="flex justify-between"><a role=button>Illusions & Masking</a></label><ul><li><a href=/showcase/docs/Workshops/-Illusions-Masking/illusions/>Illusions</a></li><li><a href=/showcase/docs/Workshops/-Illusions-Masking/masking/>Masking</a></li></ul></li><li><input type=checkbox id=section-dc7e1e5fd4746fe856186ff48c2abd08 class=toggle>
<label for=section-dc7e1e5fd4746fe856186ff48c2abd08 class="flex justify-between"><a role=button>Coloring</a></label><ul><li><a href=/showcase/docs/Workshops/coloring/coloring/>Coloring</a></li></ul></li><li><input type=checkbox id=section-37e76b270a0326beee8ad02570e50096 class=toggle checked>
<label for=section-37e76b270a0326beee8ad02570e50096 class="flex justify-between"><a role=button>Shaders</a></label><ul><li><a href=/showcase/docs/Workshops/shaders/flow/ class=active>Flow</a></li><li><a href=/showcase/docs/Workshops/shaders/glitch/>Glitch</a></li></ul></li><li><input type=checkbox id=section-2889902daffc9a8f722a6fb0706d26db class=toggle>
<label for=section-2889902daffc9a8f722a6fb0706d26db class="flex justify-between"><a role=button>Terrain Generation</a></label><ul><li><a href=/showcase/docs/Workshops/terrain_generation/mach_bands/>Mach Bands</a></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Flow</strong>
<label for=toc-control></label></div></header><article class=markdown><h2 id=flow-field-art>Flow field art
<a class=anchor href=#flow-field-art>#</a></h2><p>Flow art is a captivating form of artistic expression that explores the beauty of fluidity and movement, it embraces the dynamic nature of flowing substances, such as paint, ink, or other viscous materials, to create mesmerizing patterns and compositions; The process involves pouring or manipulating the fluid medium onto a surface, allowing it to move and spread organically. The interplay of gravity, surface tension, and the artist&rsquo;s guidance gives rise to a symphony of shapes, colors, and textures pleasing to the observer.</p><p>One of the most captivating aspects of flow art is its unpredictability, as the liquid medium flows and mixes, it forms intricate and unique patterns that cannot be replicated. The artist observes and interacts with the evolving composition, making intuitive decisions to guide the flow or introduce additional elements. In this implementation particularly we are using a flow field to guide the flow a set of particles, the flow field is a 2D grid of vectors that are used to determine the direction of the particles that change with the time and so genrate different compositions, the particles so left a fading trail where they move, leaving a unique composition where the movement can easily be seen.</p><h2 id=perlin-noise>Perlin noise
<a class=anchor href=#perlin-noise>#</a></h2><p>Perlin noise is a procedural noise function that generates a smooth and continuous random pattern, developed by Ken Perlin in the 1980s and has since become widely used in computer graphics and simulations, particularly useful for creating natural-looking textures, terrain, and smooth animations. At its core, Perlin noise is a mathematical algorithm that generates a grid of random gradient vectors. These gradient vectors are assigned to each integer coordinate point in the grid, and when given a floating-point coordinate within the grid, Perlin noise interpolates between the surrounding gradient vectors to produce a smooth value at that point.</p><img src=/showcase/assets/image/perlin_noise.jpeg alt="Convolution Example" style="height:300px;width:600px;margin:30px auto;display:block">
<details><summary>Special Keys</summary><div class=markdown-inner><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td>F</td><td>See the flow field</td></tr></tbody></table></div></details><iframe marginheight=0 marginwidth=0 frameborder=1 scrolling=no id=flow_field style=width:600px;height:600px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/showcase/sketches/flow_field.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h3 id=code-explanation>Code explanation
<a class=anchor href=#code-explanation>#</a></h3><p>The code consists of multiple processes that work at the same time generating the final composition. The first process is the generation of the flow field, this is done by generating a grid of vectors that are used to determine the direction of the particles and then drawing the vectors on the canvas using a dedicated shader for this process. The second process is the generation of the particles, this is done by generating a set of particles that move on the canvas following the direction of the vectors of the flow field, the particles are drawn on the canvas using a dedicated shader for this process. The third process is the generation of the trails, this is done by slowlly reducing the alpha channel in the background after each frame already painted the particles shader.</p><div class=book-tabs><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-0 checked>
<label for=tabs-uniqueid-0>Flow Field vertex</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>attribute</span> <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>aPosition</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>attribute</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>aTexCoord</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>vTexCoord</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gl_Position</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>projectionMatrix</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>modelViewMatrix</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>aPosition</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>aTexCoord</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-1>
<label for=tabs-uniqueid-1>Flow Field fragment</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>ifdef</span> <span style=color:#a6e22e>GL_ES</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>precision</span> <span style=color:#a6e22e>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>endif</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>u_resolution</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>u_scale</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>u_time</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>u_showField</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>st</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>gl_FragCoord</span>.<span style=color:#a6e22e>xy</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>u_resolution</span>.<span style=color:#a6e22e>xy</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>uv</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>st</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>u_scale</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>u_showField</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>flow</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec2</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>uv</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>u_time</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.1</span>),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>uv</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>u_time</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.1</span>)
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>magnitude</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>length</span>(<span style=color:#a6e22e>flow</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>magnitude</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>color</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div><div class=book-tabs><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-0 checked>
<label for=tabs-uniqueid-0>Particles vertex</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>attribute</span> <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>aPosition</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>attribute</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>aTexCoord</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>vTexCoord</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gl_Position</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>projectionMatrix</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>modelViewMatrix</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>aPosition</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>aTexCoord</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-1>
<label for=tabs-uniqueid-1>Particles fragment</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>ifdef</span> <span style=color:#a6e22e>GL_ES</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>precision</span> <span style=color:#a6e22e>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>endif</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>u_resolution</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>u_pos</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>u_prevPos</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>st</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>gl_FragCoord</span>.<span style=color:#a6e22e>xy</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>u_resolution</span>.<span style=color:#a6e22e>xy</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>pos</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>u_pos</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.0</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>prevPos</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>u_prevPos</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.0</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>direction</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>normalize</span>(<span style=color:#a6e22e>pos</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>prevPos</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>intensity</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>smoothstep</span>(<span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.1</span>, <span style=color:#a6e22e>distance</span>(<span style=color:#a6e22e>st</span>, <span style=color:#a6e22e>pos</span>));
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>intensity</span>), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div><div class=book-tabs><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-0 checked>
<label for=tabs-uniqueid-0>Flow field generation</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>initializeFlowField</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowfield</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createGraphics</span>(<span style=color:#a6e22e>cols</span>, <span style=color:#a6e22e>rows</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowfield</span>.<span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowfield</span>.<span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>flowFieldShader</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowFieldShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;scale&#39;</span>, <span style=color:#a6e22e>scale</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowFieldShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;cols&#39;</span>, <span style=color:#a6e22e>cols</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowFieldShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;rows&#39;</span>, <span style=color:#a6e22e>rows</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>drawFlowField</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowfield</span>.<span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>flowFieldShader</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowFieldShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;time&#39;</span>, <span style=color:#a6e22e>frameCount</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.1</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowfield</span>.<span style=color:#a6e22e>rect</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateFlowField</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowfield</span>.<span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>flowFieldShader</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowFieldShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;time&#39;</span>, <span style=color:#a6e22e>frameCount</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.1</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowFieldShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowfield</span>.<span style=color:#a6e22e>rect</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flowFieldShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-1>
<label for=tabs-uniqueid-1>Particles generation</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>initializeParticles</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleVAO</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createGraphics</span>(<span style=color:#a6e22e>CANVAS_SIZE</span>, <span style=color:#a6e22e>CANVAS_SIZE</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleVAO</span>.<span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleVAO</span>.<span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>particleShader</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>particleTexture</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>numParticles</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>particles</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>random</span>(<span style=color:#a6e22e>CANVAS_SIZE</span>), <span style=color:#a6e22e>random</span>(<span style=color:#a6e22e>CANVAS_SIZE</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateParticles</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleVAO</span>.<span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>particleShader</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;time&#39;</span>, <span style=color:#a6e22e>frameCount</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.1</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleVAO</span>.<span style=color:#a6e22e>beginShape</span>(<span style=color:#a6e22e>POINTS</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>numParticles</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>p</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>particles</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>particleShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;position&#39;</span>, [<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>y</span>]);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>particleVAO</span>.<span style=color:#a6e22e>vertex</span>(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleVAO</span>.<span style=color:#a6e22e>endShape</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleVAO</span>.<span style=color:#a6e22e>beginShape</span>(<span style=color:#a6e22e>POINTS</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>numParticles</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>p</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>particles</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dx</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>noise</span>(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>increment</span>, <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>increment</span>, <span style=color:#a6e22e>zoff</span>), <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dy</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>noise</span>(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>increment</span>, <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>increment</span>, <span style=color:#a6e22e>zoff</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>100</span>), <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>dx</span>, <span style=color:#a6e22e>dy</span>).<span style=color:#a6e22e>mult</span>(<span style=color:#ae81ff>2</span>));
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>constrain</span>(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>x</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>CANVAS_SIZE</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>constrain</span>(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>y</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>CANVAS_SIZE</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>particleShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;position&#39;</span>, [<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>y</span>]);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>particleVAO</span>.<span style=color:#a6e22e>vertex</span>(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleVAO</span>.<span style=color:#a6e22e>endShape</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>particleShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>zoff</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>incStart</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://AlejoM1908.github.io/showcase/commit/a96507439022c3c0d64bdb8fdba29c7d06c8ab12 title='Last modified by Daniel Alejandro Melo | June 20, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 20, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div></main></body></html>